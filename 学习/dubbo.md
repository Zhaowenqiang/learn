
# dubbo 问题整理

#### 1、什么是spi，作用是什么
#### 2、dubbo的spi有什么特殊，做了哪些优化
#### 3、dubbo框架的分层设计架构
 - service业务层
 - config配置层
 - proxy服务代理层
 - registry注册中心层
 - cluster路由层
 - monitor监控层
 - protocol远程调用层
 - exchange信息交换层
 - transport网络传输层
 - serialize数据序列化层
#### 4、dubbo调用流程
 -
#### 5、dubbo的调用是同步的吗
#### 6、dubbo如何做参数校验
 - 参数校验功能是通过validationFilter实现
 - 如果将校验注解写在service接口上，则在本地会进行校验
 - 如果将校验注解写在service的实现上，在服务方进行校验
#### 7、说说dubbo的异常处理机制
#### 8、dubbo可以对调用结果进行缓存吗
 - dubbo通过cacheFilter过滤器，提供结果缓存功能，且支持消费端和服务端
 - lru：基于最近最少使用原则删除多余缓存，保持最热缓存
 - threadLocal，当前线程缓存，比如一个页面渲染，
 - jcache。集成可以桥接各种缓存实现
#### 9、注册中心挂了还可以通信吗
 - 对于正在进行中的服务和调用者是不影响的
 - 对于新注册服务有影响
 - 对于provider的死亡不影响
#### 10、dubbo在zookeeper存储了哪些信息
 - 服务提供者启动时，写下自己的地址
 - 服务消费者启动时，订阅服务注册者写地址的节点，并留下自己url
 - 监控中心启动时，订阅服务注册时提供者和消费者写下的节点
#### 11、dubbo如何优雅停机
 - 服务方
   - 首先注册中心注销
   - 停一会，把在路上的请求处理完，不能全部处理，可配置
   - 告诉所用人我要死了
   - 在停一会，让所有人接受并反应
   - 之后对于新请求不处理了，
   - 关闭心跳线程
   - 检测线程池中的线程是否进行中，等待结束或超时，关闭
   - 关闭服务器
 - 消费者
   - 停止不在发起调用请求
   - 检测请求回应，等待结束或超时，关闭
#### 12、dubbo provider异步关闭时，如何从注册中心下线
 - zookeeper，会话超时，自动删除节点就好
 - redis注册中心
#### 13、dubbo consumer只能调用注册中心获取的provider吗
 - 可以直连，方便测试，也可以关闭注册
#### 14、dubbo支持哪些通信协议
 -
#### 15、什么是本地暴露和远程暴露，区别
 - 远程调用就是暴露端口，好多地方都可以调用
 - 本地调用是指，我先进行本地调用，等以后扩展之后只需要修改协议就可以拆出去
#### 16、dubbo使用什么通信框架
 - netty3，netty4，mina，grizzly，
 - dubbo默认实现netty4
#### 17、dubbo支持哪些序列化方式
 - hessian2，基于hessian实现的序列化，dubbo协议默认方式
 - dubbo，自己实现的序列化扩展
 - kryo，基于kryo
 - fst
 - json，基于fastjson
 - nativeJava，Java原生序列化
 - compactedJava，基于原生Java实现了类封装
#### 18、dubbo有哪些负载均衡策略
 - 随机负载均衡
 - 轮询负载均衡
 - 最少活跃数
 - 一致性hash
#### 19、dubbo有哪些集群容错策略
 - failover 默认，自动切换，但是会导致延时长，可配置
 - failfast 对于写操作，一次调用失败不重试
 - failsafe 失败安全，出现异常直接忽略
 - failback 失败自动回复，定时重发
 - forKing 并行调用多个，一个调用成功就可以返回
 - broadcast 广播所有提供者，逐个调用，一个出错，则出错
#### 20、dubbo的动态代理策略
 - 通过动态代理，使得我们使用api时是透明的
 - Javassist 默认
 - jdk原生自带
 - cglib
 - asm
#### 21、为什么默认使用了Javassist
 - Javassist使用的字节码生成方式，比cglib快5倍，cglib比Java自带快2倍，与asm相当
#### 22、动态代理的生成方式有两种，什么区别
 - 字节码技术，通过实现类直接修改程序执行的字节码来改变jvm的执行
 - 动态代理接口技术，通过接口实现代理，修改实现类的执行
#### 23、为什么spring中加载接口上的注解不生效，如果实现类没有在接口内，注解也不生效，而mybits在接口上的注解是生效的
#### 24、spring的ioc容器
#### 25、spring的aop
#### 26、dubbo的服务如何监控和管理
#### 27、dubbo的降级
 - 自带降价，熔断器
 - 集成降价框架，sentinel
#### 28、如何做限流
 - 怀疑第三方
 - 防备使用方
 - 做好自己
 - 自带限流
 - 集成限流框架，sentinel
#### 29、自己设计一个限流桶
 -
#### 30、dubbo的失败重试
 -
#### 31、dubbo支持哪些注册中心
 - zookeeper 默认
 - redis
 - multicast
 - simple
#### 32、为什么不应该使用zookeeper做服务发现
 -
#### 33、接口的幂等性
#### 34、dubbo服务的升级
#### 35、dubbo的安全机制
 -
#### 36、dubbo需要web容器吗
#### 37、为什么要将系统拆分
#### 38、如何进行系统拆分
#### 39、spring cloud和dubbo
#### 40、自己设计一个rpc框架
#### 41、
